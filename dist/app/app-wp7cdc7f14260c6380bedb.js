(()=>{var e={853:(e,t)=>{}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}(()=>{"use strict";i(853);function e(e){let t=document.createElement("div");t.classList.add("physician-popup-container"),t.id="physician-popup-container";let i=e.name,s=e.title,n=e.thumbnail;console.log(e.specialty);let a=e.specialty.reduce(((e,t)=>{let i={sportsmedicine:"Sports Medicine",spineneckback:"Spine (Neck & Back)",handwrist:"Hand & Wrist",footankle:"Foot & Ankle",jointreplacement:"Joint Replacement",pediatric:"Pediatric",shoulder:"Shoulder",hipknee:"Hip & Knee",trauma:"Trauma",oncology:"Oncology",generalorthopaedics:"General Orthopaedics",jointreplacementankle:"Joint Replacement – Ankle",jointreplacementknee:"Joint Replacement – Knee",jointreplacementhip:"Joint Replacement – Hip"}[t];return t=t.charAt(0).toUpperCase()+t.slice(1),e+`<div class="specialty-text"> ${i} </div>`}),""),r=e.location.split("<br />").reduce(((e,t)=>e+`<div class="location-text"> ${t=(t=t.replace(/<\/?p>/g,"")).charAt(0).toUpperCase()+t.slice(1)} </div>`),""),o=e.affilation_image;t.innerHTML=`<div class="physician-popup">\n      <div class="physician-popup-inner">\n          <img class="profile-pic"src="${n}" />\n          <div class="content">\n              <div class="info">\n                  <div class="name"> ${i}</div>\n                  <div class="job-title"> ${s} </div>\n              </div>\n              <img class="logo" src="${o}" />\n              <div class="location-and-specialty">\n                  <div class="locations">\n                      <svg class="location-svg" width="32" height="31" viewBox="0 0 32 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <g clip-path="url(#clip0_105_662)">\n                              <path d="M18.0966 14.8542C19.9049 14.8542 21.3257 13.4333 21.3257 11.625C21.3257 9.81666 19.9049 8.39583 18.0966 8.39583C16.2882 8.39583 14.8674 9.81666 14.8674 11.625C14.8674 13.4333 16.2882 14.8542 18.0966 14.8542ZM18.0966 2.58333C23.1341 2.58333 27.1382 6.5875 27.1382 11.625C27.1382 18.3417 18.0966 28.4167 18.0966 28.4167C18.0966 28.4167 9.05491 18.3417 9.05491 11.625C9.05491 6.5875 13.0591 2.58333 18.0966 2.58333ZM6.47158 11.625C6.47158 17.4375 13.0591 25.4458 14.2216 26.8667L12.9299 28.4167C12.9299 28.4167 3.88824 18.3417 3.88824 11.625C3.88824 7.49166 6.60074 4.13333 10.3466 2.97083C8.02158 5.0375 6.47158 8.1375 6.47158 11.625Z" fill="white" />\n                          </g>\n                          <defs>\n                              <clipPath id="clip0_105_662">\n                                  <rect width="31" height="31" fill="white" transform="translate(0.0132446)" />\n                              </clipPath>\n                          </defs>\n                      </svg>\n                      <div class="location-inner">\n                         ${r}\n                      </div>\n                  </div>\n                  <div class="specialty">\n                      <svg class="specialty-svg" width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path d="M23.2566 3.875H7.75663C7.04326 3.875 6.46497 4.4533 6.46497 5.16667V25.8333C6.46497 26.5467 7.04326 27.125 7.75663 27.125H23.2566C23.97 27.125 24.5483 26.5467 24.5483 25.8333V5.16667C24.5483 4.4533 23.97 3.875 23.2566 3.875Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n                          <path d="M15.5066 20.6667V15.5M18.09 18.0833H12.9233M11.6316 7.75C11.6316 8.09257 11.7677 8.42111 12.0099 8.66335C12.2522 8.90558 12.5807 9.04167 12.9233 9.04167H18.09C18.4325 9.04167 18.7611 8.90558 19.0033 8.66335C19.2455 8.42111 19.3816 8.09257 19.3816 7.75V3.875H11.6316V7.75Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />\n                      </svg>\n                      <div class="specialty-inner">\n                      ${a}\n                      </div>\n                  </div>\n              </div>\n              <div class="learn-more">\n                    <a href="${e.permalink}">Learn More</a>\n              </div>\n          </div>\n      </div>\n      <div id='physician-close-modal' class="physician-close-modal">\n          <div class="physician-close-modal-text"> x </div>\n      </div>\n  </div>\n  `,document.body.appendChild(t),document.getElementById("physician-close-modal").onclick=()=>{t.remove(),document.body.style.overflow="auto",document.body.style.height="auto"}}const t=t=>{let i=document.createElement("div");return i.classList.add("physician-card"),i.dataset.physican_data=JSON.stringify(t),i.innerHTML=`\n    <p><img decoding="async" class="physician-card-thumbnail" src="${t.thumbnail}"></p>\n\n    <div class="physician-card-content">\n        <div class="name">${t.name}</div>\n        <div class="title">${t.title}</div>\n        <div class="location-container">\n            <div class\n            ="location">${t.affiliation_choice}</div>\n        </div>\n    </div>\n\n    <div class="physician-menu">\n     \n        <div data-value="${t.phone}" class="telephone physician-menu-item"><img decoding="async" class="phone-icon" src="${site_url}/wp-content/uploads/2024/04/specialty-2024.png"></div>\n        <div data-value="${t.location}" class="location2 physician-menu-item"><img decoding="async" class="map-icon" src="${site_url}/wp-content/uploads/2024/04/Map.png"></div>\n    </div>\n    `,i.querySelector(".physician-card-thumbnail").addEventListener("click",(()=>{window.location.href=t.permalink})),i.querySelectorAll(".physician-menu-item").forEach((i=>{i.addEventListener("click",(i=>{i.currentTarget.dataset.value;i.currentTarget.classList.contains("user")?window.location.href=t.permalink:(i.currentTarget.classList.contains("telephone")||i.currentTarget.classList.contains("location2"))&&e(t)}))})),i};const s=class{constructor(e){this.main_grid=document.querySelector(e),this.secondary_grid=document.getElementById("offering-grid"),this.secondary_text=document.getElementById("offering-text").querySelector("strong"),this.sports_medicine_row=document.getElementById("sportsmedicine-row"),this.spine_back_row=document.getElementById("spineneckback-row"),this.filterSelects=[...document.querySelectorAll(".expert-filter")].slice(0,2),this.filterSearch=document.querySelector(".expert-filter-search-box"),this.option_values_to_text_ids={all:!1,footankle:"foot-ankle-x",generalorthopaedics:"general-orthopeadics-x",handwrist:"hand-wrist-x",hipknee:"hip-x",oncology:"oncology-x",pediatric:"pediatric-x",shoulder:"shoulder-x",spineneckback:"spine-neck-back-x",sportsmedicine:"sports-medicine-x",trauma:"trauma-x"},this.activePargraph=null,this.filter={location:"all",specialty:"all",name:"all"},this.sports_medicine_row.style.display="none",this.spine_back_row.style.display="none",this.secondary_grid.style.display="none",this.secondary_text.style.display="none",this.init(),this.events()}async init(){try{await this.setup_experts(),this.getSportsMedicineRow(),this.getSpineRow()}catch(e){throw new Error(e)}}async setup_experts(){this.main_grid.innerHTML="",this.experts=await(async()=>{try{let e=new Headers;e.append("X-WP-Nonce",wp_rest_nonce);let t=await fetch(ajax_url+"ortho/v1/get_experts",{method:"GET",headers:e}),i=await t.json();if(console.log(i,"data"),!i?.success)throw console.log(i.message,"no success"),new Error("Error fetching physicians");if(i?.experts&&Array.isArray(i.experts))return i.experts.sort(((e,t)=>{const[i,s]=e.name.split(" ").reverse(),[n,a]=t.name.split(" ").reverse();return i!==n?i.localeCompare(n):s.localeCompare(a)}));throw console.log(i.message,"no experts"),new Error("Error fetching physicians")}catch(e){return e.message}})(),this.filteredExperts=[],console.log(this.experts[0],"experts"),this.experts.forEach((e=>{let i=t(e);this.main_grid.appendChild(i)}))}getSportsMedicineRow(e){this.sports_medicine_data=e.reduce(((e,t)=>{t.specialty;let i=t.specialty.includes("sportsmedicine"),s=t.secondary_specialty.includes("sportsmedicine"),n="yes"===t.surgery.toLowerCase();return i&&(n?e.sports_medicine_surgery.push(t):e.sports_medicine_non_surgery.push(t)),s&&e.sports_medicine_also_offering.push(t),e}),{sports_medicine_surgery:[],sports_medicine_non_surgery:[],sports_medicine_also_offering:[]});let i=document.getElementById("sports-medicine-surgeon"),s=document.getElementById("non-sports-medicine-surgeon");s.classList.add("physicians-grid-figma");const{sports_medicine_surgery:n,sports_medicine_non_surgery:a,sports_medicine_also_offering:r}=this.sports_medicine_data;i.innerHTML="",n.forEach((e=>{let s=t(e);i.appendChild(s)})),s.innerHTML="",a.forEach((e=>{let i=t(e);s.appendChild(i)}))}getSpineRow(e){this.spine_back_data=e.reduce(((e,t)=>{let i=t.specialty.includes("spineneckback"),s=t.secondary_specialty.includes("spineneckback"),n="yes"===t.surgery.toLowerCase();return i&&(n?e.spine_back_surgery.push(t):e.spine_back_non_surgery.push(t)),s&&e.spine_back_also_offering.push(t),e}),{spine_back_surgery:[],spine_back_non_surgery:[],spine_back_also_offering:[]});let i=document.getElementById("spine-back-surgeon"),s=document.getElementById("spine-back-non-surgeon");s.classList.add("physicians-grid-figma");const{spine_back_surgery:n,spine_back_non_surgery:a,spine_back_also_offering:r}=this.spine_back_data;i.innerHTML="",n.forEach((e=>{let s=t(e);i.appendChild(s)})),s.innerHTML="",a.forEach((e=>{let i=t(e);s.appendChild(i)}))}events(){this.filterSelects.forEach((e=>{e.addEventListener("change",(e=>{const t=()=>{this.activePargraph&&(this.activePargraph.style.display="none"),this.activePargraph=null;let t=this.option_values_to_text_ids[e.target.value];this.activePargraph=document.getElementById(t),this.activePargraph&&(this.activePargraph.style.display="block")},i=()=>{"sportsmedicine"===e.target.value?(this.sports_medicine_row.style.display="block",this.spine_back_row.style.display="none",this.main_grid.style.display="none"):"spineneckback"===e.target.value?(this.sports_medicine_row.style.display="none",this.spine_back_row.style.display="block",this.main_grid.style.display="none"):(this.sports_medicine_row.style.display="none",this.spine_back_row.style.display="none",this.main_grid.style.display="grid")};let s=e.target.dataset.filterGroup;this.filter[s]=e.target.value,"specialty"===s&&(t(),i()),this.filterExperts()}))})),this.filterSearch.addEventListener("input",(e=>{this.filter.name=e.target.value,this.filterExperts()}))}filterExperts(){this.filteredExperts=[],this.secondFilteredExperts=[],this.experts.forEach((e=>{let t=e.specialty,i=e.secondary_specialty;e.location,e.name;const s=t=>{let i=!1,s=this.filter[t].trim().toLowerCase(),n=e[t];if("all"===s||""===s||"all locations"===s)i=!0;else if(Array.isArray(n))i=n.includes(s);else{let e=new RegExp(s,"gi");i=n.match(e)}return i};let n=s("location");n&&(console.log(n,"locationFound"),s("name")&&("all"===this.filter.specialty||t.includes(this.filter.specialty)?this.filteredExperts.push(e):i.includes(this.filter.specialty)&&this.secondFilteredExperts.push(e)))})),this.main_grid.innerHTML="",this.filteredExperts.forEach((e=>{let i=t(e);this.main_grid.appendChild(i)})),this.getSportsMedicineRow(this.filteredExperts),this.getSpineRow(this.filteredExperts),this.secondFilteredExperts.length>0?(this.secondary_grid.innerHTML="",this.secondFilteredExperts.forEach((e=>{let i=t(e);this.secondary_grid.appendChild(i),this.secondary_grid.style.display="grid",this.secondary_text.style.display="block",this.secondary_text.innerHTML=`Physicians also offering  ${this.filter.specialty}`}))):(this.secondary_grid.innerHTML="",this.secondary_grid.style.display="none",this.secondary_text.style.display="none")}};new class{constructor(){this.filterButtons=document.querySelectorAll(".location-filter-button"),this.gridItems=[...document.querySelectorAll(".location-grid-item")],this.itemsToUse=[],this.itemsToNotUse=[],this.activeTab,this.parentGrid=document.getElementById("main-grid"),this.filterButtons.forEach((e=>e.onclick=this.filterButtonHandler.bind(this))),window.addEventListener("resize",this.handleResize.bind(this))}hideItems(e){e.forEach((e=>{e.classList.remove("see_location"),e.classList.add("hide_location")}))}getComputedStyleValue(e,t){return parseInt(window.getComputedStyle(e).getPropertyValue(t))}gridSizeAndColumnWidth(e){this.locationGrid=document.querySelector(".location-grid");const t=this.locationGrid.offsetWidth,i=e[0];let s=this.getComputedStyleValue(i,"margin-top"),n=this.getComputedStyleValue(i,"margin-bottom"),a=s>n?s:n,r=(this.getComputedStyleValue(i,"margin-left"),this.getComputedStyleValue(i,"margin-right"),i.offsetWidth),o=Math.floor(t/r);return{columns:o,columnWidth:r,margin:a,gridHeight:Math.ceil(e.length/o)*(i.offsetHeight+a)}}placeItemsInCorrectPosition(e,t,i,s,n){e.sort((()=>Math.random()-.5)).forEach(((e,n)=>{let a=Math.floor(n/t),r=n%t*(i+s),o=a*(e.offsetHeight+s);e.classList.remove("hide_location"),e.classList.add("see_location"),e.style.left=r+"px",e.style.top=o+"px"})),this.locationGrid=document.querySelector(".location-grid"),this.locationGrid.style.height=n+"px",this.locationGrid.style.position="relative"}initGrid(){this.initItems=this.gridItems.filter((e=>e.dataset.service.match(/main|surgery/))),this.hideItems(this.gridItems.filter((e=>!e.dataset.service.match(/main|surgery/))));const{columns:e,columnWidth:t,margin:i,gridHeight:s}=this.gridSizeAndColumnWidth(this.initItems);this.placeItemsInCorrectPosition(this.initItems,e,t,i,s)}filterButtonHandler(e){const t=e.target.id;this.activeTab&&this.activeTab.classList.remove("filter_button_clicked"),this.itemsToUse=this.gridItems.filter((e=>e.dataset.service.match(t))),this.itemsToNotUse=this.gridItems.filter((e=>!e.dataset.service.match(t))),this.hideItems(this.itemsToNotUse);const{columns:i,columnWidth:s,margin:n,gridHeight:a}=this.gridSizeAndColumnWidth(this.itemsToUse);this.placeItemsInCorrectPosition(this.itemsToUse,i,s,n,a),this.activeTab=e.target,this.activeTab.classList.add("filter_button_clicked")}handleResize(){setTimeout((()=>{if(this.itemsToUse.length>0){const{columns:e,columnWidth:t,margin:i,gridHeight:s}=this.gridSizeAndColumnWidth(this.itemsToUse);this.placeItemsInCorrectPosition(this.itemsToUse,e,t,i,s)}}),500)}};[...document.querySelectorAll(".physician-card")].map((e=>{const{location:t,specialty:i,title:s}=e.dataset;return{element:e,location:t,specialty:i,name:s}}));new s("#main-grid")})()})();
//# sourceMappingURL=app-wp7cdc7f14260c6380bedb.js.map